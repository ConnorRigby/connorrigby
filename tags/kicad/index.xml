<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Kicad on cone.codes</title><link>https://cone.codes/tags/kicad/</link><description>Recent content in Kicad on cone.codes</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Creative Commons Attribution 4.0 International</copyright><lastBuildDate>Fri, 22 Apr 2022 17:16:27 -0600</lastBuildDate><atom:link href="https://cone.codes/tags/kicad/index.xml" rel="self" type="application/rss+xml"/><item><title>CAN Link Part 4</title><link>https://cone.codes/posts/can-link-pt-4/</link><pubDate>Fri, 22 Apr 2022 17:16:27 -0600</pubDate><guid>https://cone.codes/posts/can-link-pt-4/</guid><description>After finishing up another project this week, I realized that arbitrary dimensions I picked for it fit inside the dimensions of the CAN Link project.
I spent a bit of time mocking the i.MX6 device up on the PCB and it fit really well. The width of both PCBs just happened to be the same. This will make porting the device to the i.MX platform really easy assuming the devboard actually works.</description><content>&lt;p>After finishing up &lt;a href="https://cone.codes/posts/imx6-devboard/">another project&lt;/a> this week, I realized that arbitrary dimensions I picked for it fit inside the dimensions of the CAN Link project.&lt;/p>
&lt;p>&lt;img alt="imx mockup" src="https://media.discordapp.net/attachments/957852929254113300/966413284305694760/unknown.png">&lt;/p>
&lt;p>I spent a bit of time mocking the i.MX6 device up on the PCB and it fit &lt;em>really&lt;/em> well. The width of both PCBs just &lt;em>happened&lt;/em> to be the same. This will make porting the device to the i.MX platform really easy assuming the devboard actually works. I didn&amp;rsquo;t want to actually finalize this design yet because I still don&amp;rsquo;t know if the new circuit actually works.&lt;/p>
&lt;p>What I did realize during this exercise however, is that all the components that are common between both designs would not need to move at all. I could even separate the design into two separate PCBS!&lt;/p>
&lt;p>&lt;img alt="pcb2" src="https://media.discordapp.net/attachments/957852929254113300/966441204122259486/unknown.png">&lt;/p>
&lt;p>So I started scheming on changes to the top half of the board. I figured there must be a suitable way to connect two PCBs horizantally. This was surprisingly difficult to find in a way that didn&amp;rsquo;t look really ugly. (yeah; that &lt;em>was&lt;/em> the primary deciding factor)&lt;/p>
&lt;p>&lt;img alt="phoenix-1714875" src="https://media.digikey.com/Photos/Phoenix%20Photos/1714875.jpg">&lt;/p>
&lt;p>The coolest part about this component is that it&amp;rsquo;s a pretty &amp;ldquo;standard&amp;rdquo; pin spacing meaning a 1.27mm socket fits in place of this locking connector&lt;/p>
&lt;p>&lt;img alt="1p27mm-socket" src="https://media.discordapp.net/attachments/957852929254113300/966441826343084062/unknown.png">&lt;/p>
&lt;p>Since this was mostly just a job of removing a lot of components, I didnt have much else to do here other than plumb up the new connector. Most of the signals were already going through this route anyway; I just terminated them, sliced the board in half and it was pretty much done. I sprinkled some silkscreen indicating what each pin does and got to prepping for fabrication. I was planning on having JLCPCB assemble the board, but none of difficult to solder components are &lt;code>basic parts&lt;/code>. I had them fabricate it for a grand total of $38. Once my i.MX 6 board is confirmed functioning, I&amp;rsquo;ll be designing the bottom half of this board. Ideally &amp;ldquo;design&amp;rdquo; is used lightly here, it should be really simple.&lt;/p>
&lt;p>&lt;img alt="finished-pcb" src="https://media.discordapp.net/attachments/694859292456517675/967201995104608296/unknown.png?width=1529&amp;height=1137">
&lt;img alt="finished-pcb-back" src="https://media.discordapp.net/attachments/694859292456517675/967201995486281798/unknown.png?width=1533&amp;height=1136">&lt;/p></content></item><item><title>i.MX6 Development board</title><link>https://cone.codes/posts/imx6-devboard/</link><pubDate>Thu, 21 Apr 2022 15:49:46 -0600</pubDate><guid>https://cone.codes/posts/imx6-devboard/</guid><description>While waiting on PCBs to come in the mail for other projects, a friend of mine linked me something I only wish I had found sooner. An i.MX6 SOC. Most importantly, it can be found in stock! At JLCPCB nonetheless. This prompted me to consider; Could I make a Linux capable device using only components at JLCPCB? Well, spoiler alert - no. But I tried anyway.
The Major Challenge This was a cool discovery - I&amp;rsquo;ve always wanted a low cost platform I can use for small one-off designs.</description><content>&lt;p>While waiting on PCBs to come in the mail for other &lt;a href="https://cone.codes/posts/can-link-pt-3/">projects&lt;/a>, a friend of mine linked me something I only wish I had found sooner. An &lt;a href="https://jlcpcb.com/parts/componentSearch?isSearch=true&amp;searchTxt=C1555487">i.MX6 SOC&lt;/a>. Most importantly, it can be found in stock! At JLCPCB nonetheless. This prompted me to consider; Could I make a Linux capable device using only components at JLCPCB? Well, spoiler alert - no. But I tried anyway.&lt;/p>
&lt;h2 id="the-major-challenge">The Major Challenge&lt;/h2>
&lt;p>This was a cool discovery - I&amp;rsquo;ve always wanted a low cost platform I can use for small one-off designs. What originally hoped the OSD335xx or OSD32-MP1 platforms could offer me. The global chip shortage really stuffed that one up for me, a hobbiest. What&amp;rsquo;s cool about the i.MX platforms, is they are (mostly) pin compatible. This means I can create a general &amp;ldquo;core&amp;rdquo; module that I can simply plop down on a design and be on my way to prototypes. The only problem - I&amp;rsquo;ve never routed DRAM before. The concept has always terrified me as someone with no propper training in this stuff. I knew the general concepts, some &lt;em>address&lt;/em> wires, some &lt;em>data&lt;/em> wires, maybe some &lt;em>clocks&lt;/em>? Are those differential pairs? What about termination resistors? Something about inductance? Okay so I needed a bit more than a primer. I spent all my free time researching this subject for about 3 days. After reading countless arguments on StackOverflow or watching every KiCAD tutorial on Youtube, I didn&amp;rsquo;t feel that much more confident so I figured it was time to just start failing. Which I did. A lot.&lt;/p>
&lt;p>&lt;img alt="kicad-pcb-view" src="https://media.discordapp.net/attachments/957852929254113300/965619565511974963/unknown.png">&lt;/p>
&lt;p>I didn&amp;rsquo;t take many screenshots throughout this process like I normally do, but this about sums the experience up.
Eventually I managed to get the entire circuit routed. NXP has a few app notes and some reference designs that I used as much as I could.&lt;/p>
&lt;p>&lt;img alt="kicad-3d-view" src="https://media.discordapp.net/attachments/957852929254113300/965655287711297616/unknown.png">&lt;/p>
&lt;p>During this process, I found a few really useful resources:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://github.com/jaydcarlson/mxiot">mxiot&lt;/a> - A devboard using this exact SOC. I used this a lot in the beginning for the schematic and general understanding of the platform.&lt;/li>
&lt;li>&lt;a href="https://github.com/EnzoRF/nanoberry">nanoberry&lt;/a> - More of the above, but developed in KiCAD. I used this &lt;strong>a lot&lt;/strong>&lt;/li>
&lt;/ul>
&lt;h2 id="the-easy-parts">The Easy parts&lt;/h2>
&lt;p>After getting the high speed DRAM routed, the rest of the process was pretty familiar. I plopped down some connectors I already had laying around in my office for I/O and routed in a WiFi module. This was all that was really needed to test the device out. As I mentioned earlier, the i.MX 6 series are &amp;ldquo;pin compatible&amp;rdquo; with different models. What this means is that although I&amp;rsquo;m currently using the &lt;code>6ULZ&lt;/code> version for this now, I could in theory use any of the other devices in this series using the same BGA289 package. So in the name of planning ahead, I added a few more things. Because I eventually want to use this circuit to replace the CM4 in &lt;a href="https://cone.codes/posts/can-link-pt-2/">an another project&lt;/a>, I added a CAN transciever and a DB9 connector (which is for better or worse, standard) and of course a buck converter to get 12v down to 5v.&lt;/p>
&lt;p>I also added a couple other things, for no good reason other than because they were in the library and easy to add - a RFM69 SPI radio, and a RP2040.
&lt;img alt="back-side" src="https://media.discordapp.net/attachments/957852929254113300/966168700078162001/unknown.png">&lt;/p>
&lt;h2 id="fabrication">Fabrication&lt;/h2>
&lt;p>The original reason I toook this on was because I thought I could have it fabricated by JLCPCB. At the very beginning, I checked their &lt;a href="https://jlcpcb.com/capabilities/Capabilities">capabilities&lt;/a>
&lt;img alt="caps" src="https://media.discordapp.net/attachments/957852929254113300/966840182848495636/unknown.png?width=2160&amp;height=616">
which claim to support 0.2/0.4 vias. What it doesn&amp;rsquo;t say, is that when you actually go to order boards, you have to select a special option that more than doubles the price of the board, and it&amp;rsquo;s still right at the limit of their capabilities. So I ultimately went with PCBWay since I had coupons and the price came out to be cheaper overall with them instead of JLCPCB.&lt;/p>
&lt;p>All said and done, 2 fully populated prototypes cost me $350 shipped to my house. The BOM cost is about $50 per device. I didn&amp;rsquo;t define a firm price that I wanted, but $350 is more than I wanted, but still not &lt;em>that&lt;/em> bad. The coolest part about it is that all components were readily available with no signifigant lead time.&lt;/p>
&lt;p>Check back in a month when they arrive and I find out if I can copy/paste out of a reference design well enough to get this device to boot.&lt;/p></content></item><item><title>CAN Link Part 3</title><link>https://cone.codes/posts/can-link-pt-3/</link><pubDate>Wed, 13 Apr 2022 06:29:07 -0600</pubDate><guid>https://cone.codes/posts/can-link-pt-3/</guid><description>Another day, another hardware redesign. I&amp;rsquo;m getting pretty good at it by this point, but this should be the last major revision. It&amp;rsquo;s been sent to production at PCBWay and I&amp;rsquo;ve ordered components, so there&amp;rsquo;s no going back now.
Right before clicking buy on the last revision&amp;rsquo;s PCBs, a friend of mine tricked me into breaking the remaining pins out on the board. This concept was simple enough, just find connectors that are in stock and plumb up the remaining pins.</description><content>&lt;p>Another day, another hardware redesign. I&amp;rsquo;m getting pretty good at it by this point, but this should be the last major revision. It&amp;rsquo;s been sent to production at PCBWay and I&amp;rsquo;ve ordered components, so there&amp;rsquo;s no going back now.&lt;/p>
&lt;p>Right before clicking buy on the last revision&amp;rsquo;s PCBs, a friend of mine tricked me into breaking the remaining pins out on the board. This concept was simple enough, just find connectors that are in stock and plumb up the remaining pins. What i ended up with at first came out looking pretty cool&lt;/p>
&lt;p>&lt;img alt="pcb pre-revision" src="https://cdn.discordapp.com/attachments/957852929254113300/962854818156773406/unknown.png">&lt;/p>
&lt;p>I mulled on this design overnight, planning to order it the next day. That is, until a different friend tricked me yet again. For good reason tho, look at &lt;a href="https://www.te.com/usa-en/product-CAT-D485-EN17.html?q=&amp;n=41628&amp;type=products&amp;samples=N&amp;inStoreWithoutPL=false&amp;instock=N">these enclosures&lt;/a> and the accompanying &lt;a href="https://www.te.com/usa-en/product-DTM1312PA12PBR008.html">connector&lt;/a>.&lt;/p>
&lt;p>&lt;img alt="enclosure" src="https://www.te.com/content/dam/te-com/catalog/part/CAT/D48/5EN/CAT-D485-EN17-t2.jpg/jcr:content/renditions/product-details.png">
&lt;img alt="connector" src="https://www.te.com/content/dam/te-com/catalog/part/DTM/131/2PA/DTM1312PA12PBR008-t1.jpg/jcr:content/renditions/product-details.png">&lt;/p>
&lt;p>Only problem, my current design was no where near fitting&lt;/p>
&lt;p>&lt;img alt="pcb-enclosure-disagreement" src="https://cdn.discordapp.com/attachments/957852929254113300/963054779372814366/unknown.png">&lt;/p>
&lt;p>So of course that lead me to the final redesign. I&amp;rsquo;m getting pretty quick at it by now. It only took me a few hours on Monday afternoon. The gritty details of this revision weren&amp;rsquo;t that interesting. The only net-new part I chose was &lt;a href="https://octopart.com/uc-31pffp-qs8001-amphenol+ltw-81782226">this waterproof USB connector&lt;/a>. It took me a little bit to deside where exactly to put it, but ultimately I decided the opposite side of the main connectors was suitable. This will require modification of the enclosure, but it should be simple.&lt;/p>
&lt;p>&lt;img alt="PCB with USB" src="https://media.discordapp.net/attachments/957852929254113300/963064627242078248/unknown.png?width=514&amp;height=605">&lt;/p>
&lt;p>Nothing else was really that interesting here, so here&amp;rsquo;s a few beauty shots.&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;img alt="front-no-case" src="https://media.discordapp.net/attachments/957852929254113300/963236288918585404/unknown.png?width=467&amp;height=605">&lt;/td>
&lt;td style="text-align:right">&lt;img alt="front-case" src="https://media.discordapp.net/attachments/957852929254113300/963237763535224842/unknown.png?width=519&amp;height=605">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;img alt="back-no-case" src="https://media.discordapp.net/attachments/957852929254113300/963236289325461574/unknown.png?width=467&amp;height=605">&lt;/td>
&lt;td style="text-align:right">&lt;img alt="back-case" src="https://media.discordapp.net/attachments/957852929254113300/963237763874955314/unknown.png?width=539&amp;height=604">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>I&amp;rsquo;m also absolutely obsessed with the &amp;ldquo;export STEP&amp;rdquo; feature of KiCAD. I even installed Fusion 360 for the first time to play with the model.&lt;/p>
&lt;p>&lt;img alt="cad" src="https://media.discordapp.net/attachments/957852929254113300/963603624628469770/unknown.png?width=807&amp;height=418">&lt;/p>
&lt;p>In other tangentally related news, I made the repository &lt;a href="https://github.com/miata-bot/can-link">public&lt;/a>. Stay tuned for next time, I plan to write up a quick post on &amp;ldquo;porting&amp;rdquo; all the existing software to the new hardware platform.&lt;/p></content></item></channel></rss>